<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BuildingPRO - Mi Espacio</title>
    <link rel="stylesheet" href="/css/dashboard-residente.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar Futurista -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <div class="logo-glow"></div>
                    <img src="/img/Logo.png" alt="BuildingPRO" class="logo">
                </div>
                <h2>Mi Espacio</h2>
                <span class="role-badge">Residente</span>
            </div>
            
            <div class="user-info">
                <div class="user-avatar">
                    <img src="/img/avatar-residente.jpg" alt="Residente">
                    <div class="online-status"></div>
                </div>
                <div class="user-details">
                    <h3 id="sidebar-resident-name">Juan Pérez</h3>
                    <p>Departamento 5A - Torre 1</p>
                </div>
            </div>
            
            <ul class="sidebar-menu">
                <li>
                    <a href="#inicio" class="active">
                        <div class="menu-icon">
                            <i class="fas fa-home"></i>
                        </div>
                        <span class="menu-text">Inicio</span>
                        <div class="menu-indicator"></div>
                    </a>
                </li>
                <li>
                    <a href="#finanzas">
                        <div class="menu-icon">
                            <i class="fas fa-credit-card"></i>
                        </div>
                        <span class="menu-text">Mis Finanzas</span>
                        <div class="menu-indicator"></div>
                    </a>
                </li>
                <li>
                    <a href="#reservas">
                        <div class="menu-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <span class="menu-text">Reservas</span>
                        <div class="menu-indicator"></div>
                    </a>
                </li>
                <li>
                    <a href="#mantenimiento">
                        <div class="menu-icon">
                            <i class="fas fa-tools"></i>
                        </div>
                        <span class="menu-text">Mantenimiento</span>
                        <div class="menu-indicator"></div>
                    </a>
                </li>
                <li>
                    <a href="#consumo">
                        <div class="menu-icon">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <span class="menu-text">Mi Consumo</span>
                        <div class="menu-indicator"></div>
                    </a>
                </li>
                <li>
                    <a href="#comunidad">
                        <div class="menu-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <span class="menu-text">Comunidad</span>
                        <div class="menu-indicator"></div>
                    </a>
                </li>
                <li>
                    <a href="#configuracion">
                        <div class="menu-icon">
                            <i class="fas fa-cog"></i>
                        </div>
                        <span class="menu-text">Configuración</span>
                        <div class="menu-indicator"></div>
                    </a>
                </li>
                <li class="menu-divider"></li>
                <li>
                    <a href="#" id="logout-btn">
                        <div class="menu-icon">
                            <i class="fas fa-sign-out-alt"></i>
                        </div>
                        <span class="menu-text">Cerrar Sesión</span>
                        <div class="menu-indicator"></div>
                    </a>
                </li>
            </ul>
            
            <div class="sidebar-footer">
                <div class="ai-assistant">
                    <div class="ai-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <span>Asistente IA</span>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-bar">
                <div class="welcome-message">
                    <h1>¡Bienvenido de vuelta, <span id="resident-name">Juan Pérez</span>!</h1>
                    <p id="apartment-info">Departamento 5A - Torre 1</p>
                </div>
                <div class="header-actions">
                    <div class="quick-actions">
                        <button class="btn btn-primary btn-glow" onclick="openQuickReserve()">
                            <i class="fas fa-plus"></i> Nueva Reserva
                        </button>
                        <button class="btn btn-secondary btn-glow" onclick="openQuickReport()">
                            <i class="fas fa-exclamation-circle"></i> Reportar Problema
                        </button>
                    </div>
                    <div class="header-icons">
                        <div class="notification-icon" onclick="toggleNotifications()">
                            <i class="fas fa-bell"></i>
                            <span class="badge">5</span>
                        </div>
                        <div class="user-avatar" onclick="toggleUserMenu()">
                            <img src="/img/avatar-residente.jpg" alt="Residente">
                            <div class="user-menu">
                                <a href="#configuracion"><i class="fas fa-cog"></i> Configuración</a>
                                <a href="#" id="user-menu-logout"><i class="fas fa-sign-out-alt"></i> Cerrar Sesión</a>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Notificaciones Dropdown -->
            <div class="notifications-dropdown" id="notificationsDropdown">
                <div class="notifications-header">
                    <h3>Notificaciones</h3>
                    <span class="badge">5 nuevas</span>
                </div>
                <div class="notifications-list">
                    <div class="notification-item unread">
                        <i class="fas fa-calendar-check notification-icon success"></i>
                        <div class="notification-content">
                            <p>Tu reserva de la Sala de Eventos ha sido confirmada</p>
                            <span class="notification-time">Hace 2 horas</span>
                        </div>
                    </div>
                    <div class="notification-item unread">
                        <i class="fas fa-file-invoice-dollar notification-icon info"></i>
                        <div class="notification-content">
                            <p>Recordatorio: Pago de mantenimiento vence en 3 días</p>
                            <span class="notification-time">Hace 5 horas</span>
                        </div>
                    </div>
                    <div class="notification-item">
                        <i class="fas fa-tools notification-icon warning"></i>
                        <div class="notification-content">
                            <p>Tu solicitud de mantenimiento está en proceso</p>
                            <span class="notification-time">Ayer</span>
                        </div>
                    </div>
                </div>
                <div class="notifications-footer">
                    <a href="#">Ver todas las notificaciones</a>
                </div>
            </div>

            <!-- Sección Inicio -->
            <section id="inicio" class="dashboard-section active">
                <!-- Alertas Importantes -->
                <div class="alert-banner urgent">
                    <div class="alert-content">
                        <i class="fas fa-exclamation-triangle"></i>
                        <div>
                            <h4>Corte programado de agua</h4>
                            <p>Mañana 15 Ene de 9:00 AM a 12:00 PM - Planifique sus actividades</p>
                        </div>
                    </div>
                    <button class="btn-close" onclick="closeAlert(this)">&times;</button>
                </div>

                <!-- Tarjetas de Estado Rápido -->
                <div class="quick-status-cards">
                    <div class="status-card">
                        <div class="status-icon pending">
                            <i class="fas fa-file-invoice-dollar"></i>
                        </div>
                        <div class="status-content">
                            <h3>2</h3>
                            <p>Pagos Pendientes</p>
                            <span class="status-amount">$335.25</span>
                        </div>
                        <button class="btn-link" onclick="switchSection('finanzas')">Ver detalles</button>
                    </div>

                    <div class="status-card">
                        <div class="status-icon confirmed">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="status-content">
                            <h3>1</h3>
                            <p>Reservas Activas</p>
                            <span class="status-next">Sala eventos - 20 Ene</span>
                        </div>
                        <button class="btn-link" onclick="switchSection('reservas')">Ver calendario</button>
                    </div>

                    <div class="status-card">
                        <div class="status-icon in-progress">
                            <i class="fas fa-tools"></i>
                        </div>
                        <div class="status-content">
                            <h3>1</h3>
                            <p>Mantenimientos</p>
                            <span class="status-next">En proceso - Grifería</span>
                        </div>
                        <button class="btn-link" onclick="switchSection('mantenimiento')">Seguimiento</button>
                    </div>

                    <div class="status-card">
                        <div class="status-icon normal">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="status-content">
                            <h3>22°C</h3>
                            <p>Temperatura Interior</p>
                            <span class="status-next">Confortable</span>
                        </div>
                        <button class="btn-link" onclick="viewBuildingStatus()">Estado edificio</button>
                    </div>
                </div>

                <!-- Próximos Vencimientos -->
                <div class="content-section">
                    <div class="section-header">
                        <h2><i class="fas fa-clock"></i> Próximos Vencimientos</h2>
                        <a href="#finanzas" class="view-all">Ver todos</a>
                    </div>
                    <div class="payments-list">
                        <div class="payment-item">
                            <div class="payment-info">
                                <div class="payment-icon">
                                    <i class="fas fa-home"></i>
                                </div>
                                <div>
                                    <h4>Mantenimiento Mensual</h4>
                                    <p>Vence el 05 Feb 2024</p>
                                </div>
                            </div>
                            <div class="payment-amount">
                                <span class="amount">$250.00</span>
                                <button class="btn btn-primary btn-sm" onclick="processPayment(this)">Pagar ahora</button>
                            </div>
                        </div>

                        <div class="payment-item">
                            <div class="payment-info">
                                <div class="payment-icon">
                                    <i class="fas fa-tint"></i>
                                </div>
                                <div>
                                    <h4>Servicio de Agua</h4>
                                    <p>Vence el 10 Feb 2024</p>
                                </div>
                            </div>
                            <div class="payment-amount">
                                <span class="amount">$85.50</span>
                                <button class="btn btn-primary btn-sm" onclick="processPayment(this)">Pagar ahora</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reservas Próximas -->
                <div class="content-section">
                    <div class="section-header">
                        <h2><i class="fas fa-calendar-alt"></i> Mis Reservas</h2>
                        <a href="#reservas" class="view-all">Ver calendario</a>
                    </div>
                    <div class="reservations-grid">
                        <div class="reservation-card confirmed">
                            <div class="reservation-header">
                                <h4>Sala de Eventos</h4>
                                <span class="status-badge confirmed">Confirmada</span>
                            </div>
                            <div class="reservation-details">
                                <p><i class="fas fa-calendar"></i> 20 Enero 2024</p>
                                <p><i class="fas fa-clock"></i> 15:00 - 18:00</p>
                                <p><i class="fas fa-users"></i> Máx. 50 personas</p>
                            </div>
                            <div class="reservation-actions">
                                <button class="btn btn-outline btn-sm" onclick="modifyReservation(this)">Modificar</button>
                                <button class="btn btn-outline btn-sm" onclick="cancelReservation(this)">Cancelar</button>
                            </div>
                        </div>

                        <div class="reservation-card pending">
                            <div class="reservation-header">
                                <h4>Gimnasio</h4>
                                <span class="status-badge pending">Pendiente</span>
                            </div>
                            <div class="reservation-details">
                                <p><i class="fas fa-calendar"></i> 22 Enero 2024</p>
                                <p><i class="fas fa-clock"></i> 07:00 - 08:00</p>
                                <p><i class="fas fa-users"></i> Máx. 10 personas</p>
                            </div>
                            <div class="reservation-actions">
                                <button class="btn btn-outline btn-sm" onclick="modifyReservation(this)">Editar</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Consumo de Servicios -->
                <div class="content-section">
                    <div class="section-header">
                        <h2><i class="fas fa-chart-bar"></i> Mi Consumo</h2>
                        <div class="period-selector">
                            <select id="consumption-period">
                                <option>Último mes</option>
                                <option>Últimos 3 meses</option>
                                <option>Este año</option>
                            </select>
                        </div>
                    </div>
                    <div class="consumption-cards">
                        <div class="consumption-card">
                            <div class="consumption-header">
                                <i class="fas fa-tint water"></i>
                                <span class="consumption-trend positive">-5%</span>
                            </div>
                            <h3>15.2 m³</h3>
                            <p>Consumo de agua</p>
                            <div class="consumption-comparison">
                                <span>Promedio vecinos: 12.8 m³</span>
                            </div>
                        </div>

                        <div class="consumption-card">
                            <div class="consumption-header">
                                <i class="fas fa-bolt energy"></i>
                                <span class="consumption-trend negative">+8%</span>
                            </div>
                            <h3>210.5 kWh</h3>
                            <p>Consumo eléctrico</p>
                            <div class="consumption-comparison">
                                <span>Promedio vecinos: 195.3 kWh</span>
                            </div>
                        </div>

                        <div class="consumption-card">
                            <div class="consumption-header">
                                <i class="fas fa-fire gas"></i>
                                <span class="consumption-trend positive">-3%</span>
                            </div>
                            <h3>8.7 m³</h3>
                            <p>Consumo de gas</p>
                            <div class="consumption-comparison">
                                <span>Promedio vecinos: 9.2 m³</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Sección Finanzas -->
            <section id="finanzas" class="dashboard-section">
                <div class="content-section">
                    <div class="section-header">
                        <h2><i class="fas fa-credit-card"></i> Mis Finanzas</h2>
                        <div class="section-actions">
                            <button class="btn btn-primary" onclick="downloadFinancialReport()">
                                <i class="fas fa-download"></i> Descargar Reporte
                            </button>
                        </div>
                    </div>
                    <div class="financial-overview">
                        <div class="financial-card total">
                            <h3>Total Pendiente</h3>
                            <div class="amount">$335.25</div>
                            <p>Vence en 15 días</p>
                        </div>
                        <div class="financial-card paid">
                            <h3>Pagado este mes</h3>
                            <div class="amount">$450.00</div>
                            <p>Al día con los pagos</p>
                        </div>
                        <div class="financial-card upcoming">
                            <h3>Próximos</h3>
                            <div class="amount">$185.50</div>
                            <p>Vence el próximo mes</p>
                        </div>
                    </div>
                    
                    <!-- Historial de Pagos -->
                    <div class="payment-history">
                        <h3>Historial de Pagos</h3>
                        <div class="history-table">
                            <div class="table-header">
                                <div class="table-cell">Fecha</div>
                                <div class="table-cell">Descripción</div>
                                <div class="table-cell">Monto</div>
                                <div class="table-cell">Estado</div>
                                <div class="table-cell">Acciones</div>
                            </div>
                            <div class="table-row">
                                <div class="table-cell">10 Ene 2024</div>
                                <div class="table-cell">Mantenimiento Mensual</div>
                                <div class="table-cell">$250.00</div>
                                <div class="table-cell"><span class="status-badge paid">Pagado</span></div>
                                <div class="table-cell">
                                    <button class="btn btn-outline btn-sm" onclick="downloadReceipt(this)">Recibo</button>
                                </div>
                            </div>
                            <div class="table-row">
                                <div class="table-cell">05 Ene 2024</div>
                                <div class="table-cell">Servicio de Agua</div>
                                <div class="table-cell">$85.50</div>
                                <div class="table-cell"><span class="status-badge pending">Pendiente</span></div>
                                <div class="table-cell">
                                    <button class="btn btn-primary btn-sm" onclick="processPayment(this)">Pagar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Sección Reservas -->
            <section id="reservas" class="dashboard-section">
                <div class="content-section">
                    <div class="section-header">
                        <h2><i class="fas fa-calendar-check"></i> Mis Reservas</h2>
                        <button class="btn btn-primary" onclick="openQuickReserve()">
                            <i class="fas fa-plus"></i> Nueva Reserva
                        </button>
                    </div>
                    
                    <!-- Filtros de Reservas -->
                    <div class="filters-row">
                        <div class="filter-group">
                            <label for="reservation-status-filter">Estado:</label>
                            <select id="reservation-status-filter">
                                <option value="all">Todas</option>
                                <option value="confirmed">Confirmadas</option>
                                <option value="pending">Pendientes</option>
                                <option value="cancelled">Canceladas</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="reservation-area-filter">Área:</label>
                            <select id="reservation-area-filter">
                                <option value="all">Todas</option>
                                <option value="sala-eventos">Sala de Eventos</option>
                                <option value="gimnasio">Gimnasio</option>
                                <option value="piscina">Piscina</option>
                                <option value="terraza">Terraza</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="reservation-date-filter">Fecha:</label>
                            <select id="reservation-date-filter">
                                <option value="all">Todas</option>
                                <option value="this-week">Esta semana</option>
                                <option value="this-month">Este mes</option>
                                <option value="next-month">Próximo mes</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Calendario de Reservas -->
                    <div class="calendar-container">
                        <div class="calendar-header">
                            <button class="btn btn-outline" onclick="previousMonth()">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <h3 id="current-month">Enero 2024</h3>
                            <button class="btn btn-outline" onclick="nextMonth()">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        <div class="calendar" id="reservation-calendar">
                            <!-- El calendario se genera dinámicamente con JavaScript -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Sección Mantenimiento Mejorada -->
            <section id="mantenimiento" class="dashboard-section">
                <div class="content-section">
                    <div class="section-header">
                        <h2><i class="fas fa-tools"></i> Mantenimiento</h2>
                        <button class="btn btn-primary" onclick="openMaintenanceRequest()">
                            <i class="fas fa-plus"></i> Nueva Solicitud
                        </button>
                    </div>
                    
                    <!-- Filtros de Mantenimiento -->
                    <div class="filters-row">
                        <div class="filter-group">
                            <label for="maintenance-status-filter">Estado:</label>
                            <select id="maintenance-status-filter">
                                <option value="all">Todos</option>
                                <option value="open">Abiertos</option>
                                <option value="in-progress">En Proceso</option>
                                <option value="resolved">Resueltos</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="maintenance-priority-filter">Prioridad:</label>
                            <select id="maintenance-priority-filter">
                                <option value="all">Todas</option>
                                <option value="low">Baja</option>
                                <option value="medium">Media</option>
                                <option value="high">Alta</option>
                                <option value="urgent">Urgente</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Tickets de Mantenimiento -->
                    <div class="maintenance-tickets">
                        <div class="tickets-header">
                            <h3>Tickets de Mantenimiento</h3>
                            <div class="tickets-stats">
                                <span class="stat open">2 Abiertos</span>
                                <span class="stat in-progress">1 En Proceso</span>
                                <span class="stat resolved">5 Resueltos</span>
                            </div>
                        </div>
                        
                        <div class="tickets-list">
                            <!-- Ticket 1 -->
                            <div class="ticket-card high">
                                <div class="ticket-header">
                                    <div class="ticket-info">
                                        <h4>Fuga de agua en grifería</h4>
                                        <div class="ticket-meta">
                                            <span class="ticket-id">#MT-001</span>
                                            <span class="ticket-date">15 Ene 2024</span>
                                        </div>
                                    </div>
                                    <div class="ticket-status">
                                        <span class="status-badge in-progress">En Proceso</span>
                                        <span class="priority-badge high">Alta</span>
                                    </div>
                                </div>
                                <div class="ticket-content">
                                    <p>Se presenta fuga constante de agua en la grifería del baño principal. El problema comenzó ayer por la noche y ha empeorado esta mañana.</p>
                                    <div class="ticket-images">
                                        <div class="image-preview">
                                            <img src="/img/maintenance/leak.jpg" alt="Fuga de agua">
                                        </div>
                                    </div>
                                </div>
                                <div class="ticket-footer">
                                    <div class="ticket-assignee">
                                        <span>Asignado a: <strong>Carlos Martínez</strong></span>
                                    </div>
                                    <div class="ticket-actions">
                                        <button class="btn btn-outline btn-sm" onclick="viewRequestDetails(this)">Detalles</button>
                                        <button class="btn btn-outline btn-sm" onclick="contactTechnician(this)">Contactar</button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Ticket 2 -->
                            <div class="ticket-card medium">
                                <div class="ticket-header">
                                    <div class="ticket-info">
                                        <h4>Problema con enchufes eléctricos</h4>
                                        <div class="ticket-meta">
                                            <span class="ticket-id">#MT-002</span>
                                            <span class="ticket-date">12 Ene 2024</span>
                                        </div>
                                    </div>
                                    <div class="ticket-status">
                                        <span class="status-badge open">Abierto</span>
                                        <span class="priority-badge medium">Media</span>
                                    </div>
                                </div>
                                <div class="ticket-content">
                                    <p>Los enchufes de la habitación principal no funcionan correctamente. Se necesita revisión del circuito eléctrico.</p>
                                </div>
                                <div class="ticket-footer">
                                    <div class="ticket-assignee">
                                        <span>Pendiente de asignación</span>
                                    </div>
                                    <div class="ticket-actions">
                                        <button class="btn btn-outline btn-sm" onclick="viewRequestDetails(this)">Detalles</button>
                                        <button class="btn btn-outline btn-sm" onclick="cancelRequest(this)">Cancelar</button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Ticket 3 (Resuelto) -->
                            <div class="ticket-card resolved">
                                <div class="ticket-header">
                                    <div class="ticket-info">
                                        <h4>Puerta del balcón atascada</h4>
                                        <div class="ticket-meta">
                                            <span class="ticket-id">#MT-003</span>
                                            <span class="ticket-date">05 Ene 2024</span>
                                        </div>
                                    </div>
                                    <div class="ticket-status">
                                        <span class="status-badge resolved">Resuelto</span>
                                        <span class="priority-badge low">Baja</span>
                                    </div>
                                </div>
                                <div class="ticket-content">
                                    <p>La puerta corrediza del balcón estaba atascada y no se podía abrir correctamente. Se realizó lubricación y ajuste de rieles.</p>
                                </div>
                                <div class="ticket-footer">
                                    <div class="ticket-assignee">
                                        <span>Resuelto por: <strong>Miguel Ángel Torres</strong></span>
                                    </div>
                                    <div class="ticket-actions">
                                        <button class="btn btn-outline btn-sm" onclick="viewRequestDetails(this)">Ver detalles</button>
                                        <button class="btn btn-outline btn-sm" onclick="reopenTicket(this)">Reabrir</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Sección Consumo -->
            <section id="consumo" class="dashboard-section">
                <div class="content-section">
                    <div class="section-header">
                        <h2><i class="fas fa-chart-pie"></i> Mi Consumo</h2>
                        <div class="period-selector">
                            <select id="detailed-consumption-period">
                                <option>Último mes</option>
                                <option>Últimos 3 meses</option>
                                <option>Este año</option>
                            </select>
                        </div>
                    </div>
                    <div class="consumption-charts">
                        <canvas id="consumptionChart" width="400" height="200"></canvas>
                    </div>
                    
                    <!-- Comparativa con Vecinos -->
                    <div class="comparison-section">
                        <h3>Comparativa con el Promedio del Edificio</h3>
                        <div class="comparison-chart">
                            <canvas id="comparisonChart" width="400" height="200"></canvas>
                        </div>
                    </div>
                    
                    <!-- Alertas Inteligentes -->
                    <div class="alerts-section">
                        <h3>Alertas Inteligentes</h3>
                        <div class="alerts-grid">
                            <div class="alert-card">
                                <div class="alert-icon warning">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div class="alert-content">
                                    <h4>Consumo Eléctrico Elevado</h4>
                                    <p>Tu consumo eléctrico es 15% mayor al promedio del edificio</p>
                                </div>
                                <button class="btn btn-outline btn-sm">Ver consejos</button>
                            </div>
                            <div class="alert-card">
                                <div class="alert-icon success">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div class="alert-content">
                                    <h4>Consumo de Agua Óptimo</h4>
                                    <p>Tu consumo de agua está 8% por debajo del promedio</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Sección Comunidad Mejorada -->
            <section id="comunidad" class="dashboard-section">
                <div class="content-section">
                    <div class="section-header">
                        <h2><i class="fas fa-users"></i> Comunidad</h2>
                        <button class="btn btn-primary" onclick="openNewPost()">
                            <i class="fas fa-plus"></i> Nueva Publicación
                        </button>
                    </div>

                    <!-- Chat Comunitario -->
                    <div class="community-chat">
                        <h3>Chat Comunitario</h3>
                        <div class="chat-container">
                            <div class="chat-sidebar">
                                <div class="chat-search">
                                    <input type="text" placeholder="Buscar conversaciones...">
                                </div>
                                <div class="chat-list">
                                    <div class="chat-item active">
                                        <div class="chat-avatar">
                                            <img src="/img/avatar-default.jpg" alt="Usuario">
                                            <div class="online-dot"></div>
                                        </div>
                                        <div class="chat-info">
                                            <h4>Grupo General</h4>
                                            <p>Último mensaje: Hola a todos...</p>
                                        </div>
                                        <div class="chat-meta">
                                            <span class="chat-time">2 min</span>
                                            <span class="unread-count">3</span>
                                        </div>
                                    </div>
                                    <div class="chat-item">
                                        <div class="chat-avatar">
                                            <img src="/img/avatar-default.jpg" alt="Usuario">
                                        </div>
                                        <div class="chat-info">
                                            <h4>María González</h4>
                                            <p>¿Alguien tiene recomendaciones...</p>
                                        </div>
                                        <div class="chat-meta">
                                            <span class="chat-time">5 min</span>
                                        </div>
                                    </div>
                                    <div class="chat-item">
                                        <div class="chat-avatar">
                                            <img src="/img/avatar-default.jpg" alt="Usuario">
                                        </div>
                                        <div class="chat-info">
                                            <h4>Carlos Rodríguez</h4>
                                            <p>La reunión será el sábado...</p>
                                        </div>
                                        <div class="chat-meta">
                                            <span class="chat-time">1 h</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="chat-main">
                                <div class="chat-header">
                                    <div class="chat-user">
                                        <div class="chat-avatar">
                                            <img src="/img/avatar-default.jpg" alt="Usuario">
                                            <div class="online-dot"></div>
                                        </div>
                                        <div class="chat-user-info">
                                            <h4>Grupo General</h4>
                                            <p>15 miembros en línea</p>
                                        </div>
                                    </div>
                                    <div class="chat-actions">
                                        <button class="btn btn-outline btn-sm"><i class="fas fa-phone"></i></button>
                                        <button class="btn btn-outline btn-sm"><i class="fas fa-video"></i></button>
                                        <button class="btn btn-outline btn-sm"><i class="fas fa-ellipsis-v"></i></button>
                                    </div>
                                </div>
                                <div class="chat-messages">
                                    <div class="message received">
                                        <div class="message-avatar">
                                            <img src="/img/avatar-default.jpg" alt="Usuario">
                                        </div>
                                        <div class="message-content">
                                            <div class="message-sender">María González</div>
                                            <div class="message-text">Hola a todos, ¿alguien sabe si habrá corte de agua mañana?</div>
                                            <div class="message-time">10:15 AM</div>
                                        </div>
                                    </div>
                                    <div class="message sent">
                                        <div class="message-content">
                                            <div class="message-text">Hola María, según el anuncio no habrá corte esta semana</div>
                                            <div class="message-time">10:16 AM</div>
                                        </div>
                                    </div>
                                    <div class="message received">
                                        <div class="message-avatar">
                                            <img src="/img/avatar-default.jpg" alt="Usuario">
                                        </div>
                                        <div class="message-content">
                                            <div class="message-sender">Carlos Rodríguez</div>
                                            <div class="message-text">Exacto, el próximo corte será el miércoles de la próxima semana</div>
                                            <div class="message-time">10:17 AM</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="chat-input">
                                    <div class="input-actions">
                                        <button class="btn-icon"><i class="fas fa-paperclip"></i></button>
                                        <button class="btn-icon"><i class="fas fa-image"></i></button>
                                    </div>
                                    <input type="text" placeholder="Escribe un mensaje...">
                                    <button class="btn btn-primary"><i class="fas fa-paper-plane"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Panel de Anuncios, Quejas y Sugerencias -->
                    <div class="community-panels">
                        <div class="panel-tabs">
                            <button class="panel-tab active" data-tab="announcements">Anuncios</button>
                            <button class="panel-tab" data-tab="suggestions">Sugerencias</button>
                            <button class="panel-tab" data-tab="complaints">Quejas</button>
                            <button class="panel-tab" data-tab="comments">Comentarios</button>
                        </div>
                        
                        <div class="panel-content">
                            <!-- Anuncios -->
                            <div class="tab-panel active" id="announcements-panel">
                                <div class="announcements-list">
                                    <div class="announcement-card important">
                                        <div class="announcement-header">
                                            <i class="fas fa-exclamation-circle"></i>
                                            <h4>Corte Programado de Agua</h4>
                                            <span class="announcement-date">15 Ene 2024</span>
                                        </div>
                                        <p>Se informa que el próximo miércoles 17 de enero habrá corte de agua programado de 9:00 AM a 12:00 PM para mantenimiento preventivo.</p>
                                        <div class="announcement-footer">
                                            <span class="announcement-author">Administración</span>
                                            <div class="announcement-actions">
                                                <button class="btn-link"><i class="far fa-thumbs-up"></i> 12</button>
                                                <button class="btn-link"><i class="far fa-comment"></i> 3</button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="announcement-card">
                                        <div class="announcement-header">
                                            <i class="fas fa-info-circle"></i>
                                            <h4>Nuevo Horario del Gimnasio</h4>
                                            <span class="announcement-date">12 Ene 2024</span>
                                        </div>
                                        <p>A partir del lunes 15 de enero, el gimnasio tendrá nuevo horario: Lunes a Viernes de 6:00 AM a 10:00 PM, Sábados y Domingos de 8:00 AM a 8:00 PM.</p>
                                        <div class="announcement-footer">
                                            <span class="announcement-author">Administración</span>
                                            <div class="announcement-actions">
                                                <button class="btn-link"><i class="far fa-thumbs-up"></i> 8</button>
                                                <button class="btn-link"><i class="far fa-comment"></i> 2</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Sugerencias -->
                            <div class="tab-panel" id="suggestions-panel">
                                <div class="suggestion-form">
                                    <h4>Nueva Sugerencia</h4>
                                    <textarea placeholder="Comparte tu sugerencia para mejorar nuestra comunidad..."></textarea>
                                    <button class="btn btn-primary">Enviar Sugerencia</button>
                                </div>
                                <div class="suggestions-list">
                                    <!-- Las sugerencias se cargarían dinámicamente -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Sección Configuración -->
            <section id="configuracion" class="dashboard-section">
                <div class="content-section">
                    <div class="section-header">
                        <h2><i class="fas fa-cog"></i> Configuración</h2>
                    </div>
                    
                    <div class="settings-grid">
                        <div class="settings-card">
                            <h3><i class="fas fa-user"></i> Perfil</h3>
                            <div class="settings-form">
                                <div class="form-group">
                                    <label>Nombre Completo</label>
                                    <input type="text" value="Juan Pérez">
                                </div>
                                <div class="form-group">
                                    <label>Email</label>
                                    <input type="email" value="juan.perez@email.com">
                                </div>
                                <div class="form-group">
                                    <label>Teléfono</label>
                                    <input type="tel" value="+1 234 567 8900">
                                </div>
                                <button class="btn btn-primary">Guardar Cambios</button>
                            </div>
                        </div>
                        
                        <div class="settings-card">
                            <h3><i class="fas fa-bell"></i> Notificaciones</h3>
                            <div class="settings-options">
                                <div class="option-item">
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                    <span>Notificaciones por Email</span>
                                </div>
                                <div class="option-item">
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                    <span>Notificaciones Push</span>
                                </div>
                                <div class="option-item">
                                    <label class="switch">
                                        <input type="checkbox">
                                        <span class="slider"></span>
                                    </label>
                                    <span>Notificaciones SMS</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="settings-card">
                            <h3><i class="fas fa-shield-alt"></i> Seguridad</h3>
                            <div class="security-options">
                                <button class="btn btn-outline" onclick="changePassword()">Cambiar Contraseña</button>
                                <button class="btn btn-outline" onclick="enable2FA()">Activar 2FA</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modales y Ventanas Emergentes -->
    <div id="quick-reserve-modal" class="modal">
        <div class="modal-content futurist-modal">
            <div class="modal-header">
                <h3>Nueva Reserva</h3>
                <button class="modal-close" onclick="closeModal('quick-reserve-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Área a Reservar</label>
                    <select>
                        <option>Sala de Eventos</option>
                        <option>Gimnasio</option>
                        <option>Piscina</option>
                        <option>Terraza BBQ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Fecha</label>
                    <input type="date">
                </div>
                <div class="form-group">
                    <label>Hora de Inicio</label>
                    <input type="time">
                </div>
                <div class="form-group">
                    <label>Hora de Fin</label>
                    <input type="time">
                </div>
                <div class="form-group">
                    <label>Número de Personas</label>
                    <input type="number" min="1">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('quick-reserve-modal')">Cancelar</button>
                <button class="btn btn-primary">Confirmar Reserva</button>
            </div>
        </div>
    </div>

    <div id="maintenance-request-modal" class="modal">
        <div class="modal-content futurist-modal">
            <div class="modal-header">
                <h3>Nueva Solicitud de Mantenimiento</h3>
                <button class="modal-close" onclick="closeModal('maintenance-request-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Categoría</label>
                    <select>
                        <option>Electricidad</option>
                        <option>Fontanería</option>
                        <option>Ascensor</option>
                        <option>Limpieza</option>
                        <option>Otro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Prioridad</label>
                    <select>
                        <option>Baja</option>
                        <option>Media</option>
                        <option>Alta</option>
                        <option>Urgente</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Descripción del Problema</label>
                    <textarea rows="4" placeholder="Describe detalladamente el problema..."></textarea>
                </div>
                <div class="form-group">
                    <label>Subir Imágenes (Opcional)</label>
                    <div class="file-upload">
                        <input type="file" accept="image/*" multiple>
                        <div class="upload-area">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>Arrastra imágenes aquí o haz clic para seleccionar</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('maintenance-request-modal')">Cancelar</button>
                <button class="btn btn-primary">Enviar Solicitud</button>
            </div>
        </div>
    </div>

    <div id="logout-modal" class="modal">
        <div class="modal-content futurist-modal">
            <div class="modal-header">
                <h3>Confirmar Cierre de Sesión</h3>
            </div>
            <div class="modal-body">
                <p>¿Estás seguro de que deseas cerrar sesión?</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('logout-modal')">Cancelar</button>
                <button class="btn btn-primary" onclick="logout()">Sí, Cerrar Sesión</button>
            </div>
        </div>
    </div>

    <!-- Asistente Virtual IA -->
    <div class="ai-assistant-widget">
        <div class="ai-toggle" onclick="toggleAIAssistant()">
            <i class="fas fa-robot"></i>
        </div>
        <div class="ai-chat-container">
            <div class="ai-chat-header">
                <h4>Asistente Virtual</h4>
                <button class="ai-close" onclick="toggleAIAssistant()">&times;</button>
            </div>
            <div class="ai-chat-messages">
                <div class="ai-message received">
                    <div class="message-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="message-content">
                        <p>¡Hola! Soy tu asistente virtual. ¿En qué puedo ayudarte hoy?</p>
                    </div>
                </div>
            </div>
            <div class="ai-chat-input">
                <input type="text" placeholder="Escribe tu pregunta...">
                <button class="btn btn-primary"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
    </div>

    <script src="/js/dashboard-residente.js"></script>
</body>
</html>