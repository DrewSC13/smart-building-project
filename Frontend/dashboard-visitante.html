<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BuildingPRO - Dashboard Visitante</title>
    <link rel="stylesheet" href="css/dashboard-visitante.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="dashboard-container">
        <!-- Asistente Virtual Flotante -->
        <div class="virtual-assistant">
            <div class="assistant-avatar" id="assistantAvatar">
                <div class="avatar-pulse"></div>
                <i class="fas fa-robot"></i>
            </div>
            <div class="assistant-chat" id="assistantChat">
                <div class="chat-header">
                    <span>Asistente Virtual</span>
                    <button class="close-chat" id="closeChat"><i class="fas fa-times"></i></button>
                </div>
                <div class="chat-messages" id="chatMessages">
                    <div class="message assistant-message">
                        <p>¡Hola! Soy tu asistente virtual. ¿En qué puedo ayudarte durante tu visita?</p>
                    </div>
                </div>
                <div class="chat-input">
                    <input type="text" id="chatInput" placeholder="Escribe tu pregunta...">
                    <button id="sendMessage"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>

        <!-- Header de Visitante -->
        <header class="visitante-header">
            <div class="header-content">
                <div class="logo-container">
                    <img src="img/Logo.png" alt="BuildingPRO" class="logo" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMTUwIDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0zMCAxMFYzMEgxMFYxMEgzMFpNMTAgMEgzMFY0SDEwVjBaIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0iTTQwIDIwaDEwdjEwSDQwVjIwWk00MCAwaDEwdjE2SDQwVjBaIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0iTTYwIDEwaDEwdjIwSDYwVjEwWk02MCAwaDEwdjZINjBWMFoiIGZpbGw9IiNmZmYiLz48dGV4dCB4PSI4MCIgeT0iMjUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iI2ZmZiI+QnVpbGRpbmdQUk88L3RleHQ+PHRleHQgeD0iODAiIHk9IjM1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iOCIgZmlsbD0iI2ZmZiI+U01BUlQgQlVJTERJTkc8L3RleHQ+PC9zdmc+'">
                    <div class="logo-text">
                        <div class="logo-title">BuildingPRO</div>
                        <div class="logo-subtitle">SMART BUILDING</div>
                    </div>
                </div>
                <div class="visitante-info">
                    <h1>Bienvenido Visitante</h1>
                    <div class="visitante-badge">
                        <i class="fas fa-user-clock"></i>
                        <span>Acceso Temporal</span>
                    </div>
                </div>
                <div class="header-actions">
                    <div class="time-display">
                        <div id="current-time">14:30</div>
                        <div id="current-date">17 Ene 2024</div>
                    </div>
                    <button class="btn-help" onclick="showHelp()">
                        <i class="fas fa-question-circle"></i> Ayuda
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Tarjeta de Credencial Digital -->
            <section class="credential-section">
                <div class="section-header">
                    <h2><i class="fas fa-id-card"></i> Credencial Digital</h2>
                    <div class="assistant-hint" data-section="credencial">
                        <i class="fas fa-info-circle"></i>
                        <div class="hint-text">Tu credencial digital te da acceso a las áreas permitidas</div>
                    </div>
                </div>
                <div class="credential-card">
                    <div class="credential-header">
                        <div class="qr-code">
                            <div class="qr-placeholder" id="qrCode">
                                <canvas id="qrCanvas"></canvas>
                                <div class="qr-scan-effect"></div>
                            </div>
                            <div class="qr-info">
                                <span class="qr-text">Código QR de acceso</span>
                                <span class="qr-valid">Válido por 4 horas</span>
                                <button class="btn-download-qr" onclick="downloadQRCode()">
                                    <i class="fas fa-download"></i> Descargar QR
                                </button>
                            </div>
                        </div>
                        <div class="credential-status">
                            <span class="status active">Activo</span>
                            <div class="time-remaining">
                                <i class="fas fa-clock"></i>
                                <span id="time-remaining">03:45:22</span>
                            </div>
                        </div>
                    </div>

                    <div class="credential-body">
                        <div class="visit-info">
                            <h3>Información de Visita</h3>
                            <div class="info-grid">
                                <div class="info-item">
                                    <i class="fas fa-user-tie"></i>
                                    <div>
                                        <label>Anfitrión</label>
                                        <span id="host-name">María González</span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <i class="fas fa-building"></i>
                                    <div>
                                        <label>Departamento</label>
                                        <span id="host-apartment">5B - Torre 1</span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <i class="fas fa-calendar"></i>
                                    <div>
                                        <label>Fecha de Visita</label>
                                        <span id="visit-date">17 Enero 2024</span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <i class="fas fa-clock"></i>
                                    <div>
                                        <label>Horario Autorizado</label>
                                        <span id="visit-hours">14:00 - 18:00</span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <i class="fas fa-phone"></i>
                                    <div>
                                        <label>Teléfono Anfitrión</label>
                                        <span id="host-phone">+56 9 5555 4444</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="access-info">
                            <h4>Áreas Permitidas</h4>
                            <ul class="areas-list">
                                <li><i class="fas fa-check-circle"></i> Sala de espera - Piso 1</li>
                                <li><i class="fas fa-check-circle"></i> Área social - Piso 3</li>
                                <li><i class="fas fa-check-circle"></i> Baños visitantes - Piso 1</li>
                                <li><i class="fas fa-times-circle"></i> Piscina (No disponible)</li>
                                <li><i class="fas fa-times-circle"></i> Gimnasio (Solo residentes)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Nueva Sección: Reservar Próxima Visita -->
            <section class="reservation-section">
                <div class="section-header">
                    <h2><i class="fas fa-calendar-plus"></i> Reservar Próxima Visita</h2>
                    <div class="assistant-hint" data-section="reserva">
                        <i class="fas fa-info-circle"></i>
                        <div class="hint-text">Programa tu próxima visita y solicita áreas especiales</div>
                    </div>
                </div>
                <div class="reservation-container">
                    <div class="reservation-form">
                        <h3>Solicitar Nueva Visita</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="next-visit-date"><i class="fas fa-calendar-day"></i> Fecha Deseada</label>
                                <input type="date" id="next-visit-date" min="">
                            </div>
                            <div class="form-group">
                                <label for="visit-time"><i class="fas fa-clock"></i> Horario Preferido</label>
                                <select id="visit-time">
                                    <option value="09:00-11:00">Mañana: 09:00 - 11:00</option>
                                    <option value="11:00-13:00">Mediodía: 11:00 - 13:00</option>
                                    <option value="14:00-16:00">Tarde: 14:00 - 16:00</option>
                                    <option value="16:00-18:00">Tarde-Noche: 16:00 - 18:00</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="visit-purpose"><i class="fas fa-clipboard-list"></i> Motivo de Visita</label>
                                <select id="visit-purpose">
                                    <option value="social">Visita Social</option>
                                    <option value="business">Reunión de Negocios</option>
                                    <option value="delivery">Entrega de Paquete</option>
                                    <option value="other">Otro</option>
                                </select>
                            </div>
                            <div class="form-group full-width">
                                <label for="special-areas"><i class="fas fa-map-marked-alt"></i> Áreas Especiales a Solicitar</label>
                                <div class="areas-checkbox">
                                    <label class="checkbox-item">
                                        <input type="checkbox" name="special-areas" value="sala-reuniones">
                                        <span class="checkmark"></span>
                                        Sala de Reuniones
                                    </label>
                                    <label class="checkbox-item">
                                        <input type="checkbox" name="special-areas" value="terraza">
                                        <span class="checkmark"></span>
                                        Terraza Privada
                                    </label>
                                    <label class="checkbox-item">
                                        <input type="checkbox" name="special-areas" value="quincho">
                                        <span class="checkmark"></span>
                                        Área de Quincho
                                    </label>
                                    <label class="checkbox-item">
                                        <input type="checkbox" name="special-areas" value="estacionamiento">
                                        <span class="checkmark"></span>
                                        Estacionamiento Extendido
                                    </label>
                                </div>
                            </div>
                            <div class="form-group full-width">
                                <label for="additional-notes"><i class="fas fa-sticky-note"></i> Notas Adicionales</label>
                                <textarea id="additional-notes" placeholder="Información adicional para tu anfitrión..."></textarea>
                            </div>
                        </div>
                        <button class="btn-submit-reservation" onclick="submitReservation()">
                            <i class="fas fa-paper-plane"></i> Enviar Solicitud de Visita
                        </button>
                    </div>

                    <div class="reservation-info">
                        <h3>Próximas Visitas Programadas</h3>
                        <div class="upcoming-visits">
                            <div class="visit-item">
                                <div class="visit-date">
                                    <span class="date-day">20</span>
                                    <span class="date-month">Ene</span>
                                </div>
                                <div class="visit-details">
                                    <h4>Visita Aprobada</h4>
                                    <p>15:00 - 17:00</p>
                                    <span class="visit-status approved">Confirmada</span>
                                </div>
                            </div>
                            <div class="visit-item">
                                <div class="visit-date">
                                    <span class="date-day">25</span>
                                    <span class="date-month">Ene</span>
                                </div>
                                <div class="visit-details">
                                    <h4>Esperando Confirmación</h4>
                                    <p>10:00 - 12:00</p>
                                    <span class="visit-status pending">Pendiente</span>
                                </div>
                            </div>
                        </div>

                        <div class="quick-actions">
                            <h4>Acciones Rápidas</h4>
                            <button class="quick-btn" onclick="quickReservation()">
                                <i class="fas fa-redo"></i> Misma Visita la Próxima Semana
                            </button>
                            <button class="quick-btn" onclick="requestRecurringVisit()">
                                <i class="fas fa-sync"></i> Visita Recurrente Semanal
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Servicios y Comodidades -->
            <section class="services-section">
                <div class="section-header">
                    <h2><i class="fas fa-concierge-bell"></i> Servicios Disponibles</h2>
                    <div class="assistant-hint" data-section="servicios">
                        <i class="fas fa-info-circle"></i>
                        <div class="hint-text">Estos son los servicios que puedes utilizar durante tu visita</div>
                    </div>
                </div>
                <div class="services-grid">
                    <div class="service-card available">
                        <div class="service-icon">
                            <i class="fas fa-wifi"></i>
                        </div>
                        <div class="service-content">
                            <h4>WiFi Gratuito</h4>
                            <p>Red: BuildingPRO-Visitantes</p>
                            <p>Contraseña: welcome2024</p>
                        </div>
                        <div class="service-status">
                            <span class="status available">Disponible</span>
                        </div>
                        <div class="service-action">
                            <button class="btn-copy" data-text="welcome2024">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>

                    <div class="service-card available">
                        <div class="service-icon">
                            <i class="fas fa-parking"></i>
                        </div>
                        <div class="service-content">
                            <h4>Estacionamiento</h4>
                            <p>Máximo 2 horas</p>
                            <p>Niveles B1 y B2</p>
                        </div>
                        <div class="service-status">
                            <span class="status available">Disponible</span>
                        </div>
                        <div class="service-action">
                            <button class="btn-navigate" data-location="parking">
                                <i class="fas fa-directions"></i>
                            </button>
                        </div>
                    </div>

                    <div class="service-card available">
                        <div class="service-icon">
                            <i class="fas fa-coffee"></i>
                        </div>
                        <div class="service-content">
                            <h4>Área de Descanso</h4>
                            <p>Piso 3 - Sala social</p>
                            <p>Máquina de café gratuita</p>
                        </div>
                        <div class="service-status">
                            <span class="status available">Disponible</span>
                        </div>
                        <div class="service-action">
                            <button class="btn-navigate" data-location="rest-area">
                                <i class="fas fa-directions"></i>
                            </button>
                        </div>
                    </div>

                    <div class="service-card unavailable">
                        <div class="service-icon">
                            <i class="fas fa-swimming-pool"></i>
                        </div>
                        <div class="service-content">
                            <h4>Piscina</h4>
                            <p>Actualmente no disponible</p>
                            <p>En mantenimiento</p>
                        </div>
                        <div class="service-status">
                            <span class="status unavailable">No disponible</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Mapa Interactivo -->
            <section class="map-section">
                <div class="section-header">
                    <h2><i class="fas fa-map-marked-alt"></i> Mapa del Edificio</h2>
                    <div class="assistant-hint" data-section="mapa">
                        <i class="fas fa-info-circle"></i>
                        <div class="hint-text">Usa el mapa para ubicarte en el edificio</div>
                    </div>
                </div>
                <div class="map-container">
                    <div class="map-navigation">
                        <div class="floor-selector">
                            <button class="floor-btn active" data-floor="1">Piso 1</button>
                            <button class="floor-btn" data-floor="2">Piso 2</button>
                            <button class="floor-btn" data-floor="3">Piso 3</button>
                        </div>
                        <div class="map-legend">
                            <div class="legend-item">
                                <span class="legend-color entrance"></span>
                                <span>Entrada Principal</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color allowed"></span>
                                <span>Áreas Permitidas</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color restricted"></span>
                                <span>Áreas Restringidas</span>
                            </div>
                        </div>
                    </div>
                    <div class="map-display">
                        <div class="map-placeholder" id="mapDisplay">
                            <i class="fas fa-map"></i>
                            <p>Mapa interactivo del edificio</p>
                            <p>Seleccione un piso para ver detalles</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Contactos de Emergencia -->
            <section class="emergency-section">
                <div class="section-header">
                    <h2><i class="fas fa-phone-alt"></i> Contactos Importantes</h2>
                    <div class="assistant-hint" data-section="contactos">
                        <i class="fas fa-info-circle"></i>
                        <div class="hint-text">Contacta rápidamente en caso de necesidad</div>
                    </div>
                </div>
                <div class="contact-grid">
                    <div class="contact-card security">
                        <div class="contact-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="contact-info">
                            <h4>Guardia de Seguridad</h4>
                            <p class="contact-phone">+56 9 1234 5678</p>
                            <p class="contact-ext">Extensión: 101</p>
                        </div>
                        <button class="btn-contact" onclick="callSecurity()">
                            <i class="fas fa-phone"></i> Llamar
                        </button>
                    </div>

                    <div class="contact-card admin">
                        <div class="contact-icon">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <div class="contact-info">
                            <h4>Administración</h4>
                            <p class="contact-phone">+56 9 8765 4321</p>
                            <p class="contact-ext">Extensión: 102</p>
                        </div>
                        <button class="btn-contact" onclick="callAdmin()">
                            <i class="fas fa-phone"></i> Llamar
                        </button>
                    </div>

                    <div class="contact-card host">
                        <div class="contact-icon">
                            <i class="fas fa-home"></i>
                        </div>
                        <div class="contact-info">
                            <h4>Tu Anfitrión</h4>
                            <p class="contact-phone">+56 9 5555 4444</p>
                            <p class="contact-ext">Departamento 5B</p>
                        </div>
                        <button class="btn-contact" onclick="messageHost()">
                            <i class="fas fa-comment"></i> Mensaje
                        </button>
                    </div>
                </div>
            </section>

            <!-- Normas de Convivencia -->
            <section class="rules-section">
                <div class="section-header">
                    <h2><i class="fas fa-clipboard-list"></i> Normas de Convivencia</h2>
                    <div class="assistant-hint" data-section="normas">
                        <i class="fas fa-info-circle"></i>
                        <div class="hint-text">Conoce las reglas para una visita agradable</div>
                    </div>
                </div>
                <div class="rules-list">
                    <div class="rule-item">
                        <i class="fas fa-id-card"></i>
                        <div>
                            <h4>Identificación</h4>
                            <p>Presente su identificación en recepción al ingresar</p>
                        </div>
                    </div>
                    <div class="rule-item">
                        <i class="fas fa-door-closed"></i>
                        <div>
                            <h4>Áreas Restringidas</h4>
                            <p>No ingrese a áreas marcadas como restringidas</p>
                        </div>
                    </div>
                    <div class="rule-item">
                        <i class="fas fa-clock"></i>
                        <div>
                            <h4>Horario de Silencio</h4>
                            <p>Respete el horario de silencio (22:00 - 07:00)</p>
                        </div>
                    </div>
                    <div class="rule-item">
                        <i class="fas fa-car"></i>
                        <div>
                            <h4>Estacionamiento</h4>
                            <p>Estacionamiento máximo 2 horas en áreas designadas</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer de Navegación -->
        <footer class="visitante-footer">
            <div class="footer-actions">
                <button class="footer-btn" onclick="extendVisit()">
                    <i class="fas fa-clock"></i>
                    <span>Extender Visita</span>
                </button>
                <button class="footer-btn" onclick="requestAssistance()">
                    <i class="fas fa-hands-helping"></i>
                    <span>Solicitar Ayuda</span>
                </button>
                <button class="footer-btn" onclick="showReservationSection()">
                    <i class="fas fa-calendar-plus"></i>
                    <span>Nueva Reserva</span>
                </button>
                <button class="footer-btn" onclick="endVisit()">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Finalizar Visita</span>
                </button>
            </div>
        </footer>
    </div>

    <!-- Modal de Ayuda -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-question-circle"></i> Centro de Ayuda</h3>
                <button class="close-modal" onclick="closeHelp()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="help-sections">
                    <div class="help-section">
                        <h4><i class="fas fa-qrcode"></i> Uso del Código QR</h4>
                        <p>Presente este código QR en los lectores de las puertas para acceder a las áreas permitidas.</p>
                    </div>
                    <div class="help-section">
                        <h4><i class="fas fa-map"></i> Navegación</h4>
                        <p>Use el mapa interactivo para ubicarse en el edificio. Las áreas verdes son de acceso permitido.</p>
                    </div>
                    <div class="help-section">
                        <h4><i class="fas fa-phone"></i> Emergencias</h4>
                        <p>En caso de emergencia, contacte inmediatamente al guardia de seguridad.</p>
                    </div>
                    <div class="help-section">
                        <h4><i class="fas fa-clock"></i> Tiempo de Visita</h4>
                        <p>Su visita tiene una duración máxima de 4 horas. Puede solicitar una extensión si lo necesita.</p>
                    </div>
                    <div class="help-section">
                        <h4><i class="fas fa-calendar-plus"></i> Reservas Futuras</h4>
                        <p>Puede programar sus próximas visitas y solicitar áreas especiales con anticipación.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/dashboard-visitante.js"></script>
</body>
</html>